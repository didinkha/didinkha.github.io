<!DOCTYPE html>
<html lang="en">

<!-- Oleh: Minhajuddin Kasman AR -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Shop Now</title>

  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-M2NNG24');</script>


  <script src='js/jquery-3.4.1.min.js' type="text/javascript"></script>
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="css/custom.css" rel="stylesheet" type="text/css">
  <script src='js/jquery-3.4.1.min.js' type="text/javascript"></script>
  <script src='js/bootstrap.min.js' type="text/javascript"></script>

  <script>

    // Contoh kumpulan data product *harusnya bisa dinamis dari db, tapi untuk task, data berbentuk statis
    var products = [{
      'name': 'Blue Shirt',
      'id': 'P001',
      'price': '150.000',
      'brand': 'Google',
      'category': 'Apparel',
      'variant': 'Blue'
    },
    {
      'name': 'Short Sleeve',
      'id': 'P002',
      'price': '200.000',
      'brand': 'Apple Apparel',
      'category': 'Apparel',
      'variant': 'Reddish'
    },
    {
      'name': 'Adventure Shirt',
      'id': 'P003',
      'price': '100.000',
      'brand': 'Tactical',
      'category': 'Apparel',
      'variant': 'Dark'
    },
    {
      'name': 'Blue Short',
      'id': 'P004',
      'price': '100.000',
      'brand': 'Google',
      'category': 'Apparel',
      'variant': 'Blue'
    }];

    $(document).ready(function () {
      var pageType = "list";
      var viewableProducts = [];
      for (var i = 0; i < products.length; i++) {
        viewableProducts[i] = {
          'name': products[i].name,
          'id': products[i].id,
          'price': products[i].price,
          'brand': products[i].brand,
          'category': products[i].category,
          'variant': products[i].variant,
          'list': 'Home Page'
        }
      }
      dataLayer.push({
        'ecommerce': {
          'currencyCode': 'IDR',
          'impressions': viewableProducts
        }
      });
    });

    // Contoh function untuk mengirim data product click ke Google Analytics
    $(document).on('click', 'a.productLink', function (e) {
      e.preventDefault();
      var id = $(this).data('id');
      var href = $(this).attr('href');
      $.each(products, function (key, value) {
        if (value.id === id) {

          // Pengiriman data ke Google Analytics
          dataLayer.push({
            "event": "EEproductClick",
            "ecommerce": {
              "currencyCode": "IDR",
              "click": {
                "actionField": { "list": "category" },
                "products": [{
                  'name': value.name,
                  'id': value.id,
                  'price': value.price,
                  'brand': value.brand,
                  'category': value.category,
                  'variant': value.variant
                }]
              }
            }
          });

          window.location.replace(href);
        }
      });
    });
  </script>

</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M2NNG24" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <h2 class='text-danger ml-4 mt-3'><span><img src="img/cart.png" class='mr-3' style='width:50px'></span>Shop Now</h2>
  <hr class='mb-4' />
  <div class='container'>
    <div class='p-5'>

      <!-- Daftar Barang -->
      <div class="row">
        <div class="col-md-3">
          <div class="card">
            <img src="img/catalog/shirt1.jpg" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title text-danger">Blue Shirt</h5>
              <p class="card-text">IDR 150.000
              </p>
              <a href="shirt1.html" data-id="P001" class="btn btn-danger productLink">View Product</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <img src="img/catalog/shirt2.jpg" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title text-danger">Short Sleeve</h5>
              <p class="card-text">IDR 200.000
              </p>
              <a href="shirt2.html" data-id="P002" class="btn btn-danger productLink">View Product</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <img src="img/catalog/shirt3.jpg" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title text-danger">Adventure Shirt</h5>
              <p class="card-text">IDR 100.000</p>
              <a href="shirt3.html" data-id="P003" class="btn btn-danger productLink">View Product</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card">
            <img src="img/catalog/shirt4.jpg" class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title text-danger">Blue Short</h5>
              <p class="card-text">IDR 100.000</p>
              <a href="shirt4.html" data-id="P004" class="btn btn-danger productLink">View Product</a>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>
</body>

</html>